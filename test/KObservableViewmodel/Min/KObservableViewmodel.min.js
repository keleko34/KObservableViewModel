var KObservableViewmodel=function(){var D=function(){return function(y,v,z){function q(a,d,b,g,C,c){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=c;this.type=b;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=g;this.oldValue=C}function l(a,d,b,g){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=b;this.args=g}function k(a,d){var b=m[d];return function(d,C){var c=new q(this,h(b)?d:"",a,h(b)?this[d]:"",h(b)?this[d]:"",arguments),c=new l(a,h(b)?d:"",c,arguments),e;!0!==n(c)&&(h(b)?(void 0===b[c.key]&&(b[c.key]=[]),e=b[c.key],e.push(c.args[1])):u(b)&&(void 0===b["*"]&&(b["*"]=[]),e=c.args[1]&&"*"===c.args[1]?b["*"]:b,e.push(c.args[0])));return this}}function t(a,d){var b=m[d];return function(d,c){var A=new q(this,d,a,this[d],
this[d],arguments),A=new l(a,d,A,arguments),e;if(!0!==n(A))if(h(b)){if(e=b[A.key])for(var f=0,k=e.length;f<k;f++)if(e[f].toString()===A.args[1].toString()){e.splice(f,1);break}}else if(u(b))for(void 0===b["*"]&&(b["*"]=[]),e=A.args[1]&&"*"===A.args[1]?b["*"]:b,f=0,k=e.length;f<k;f++)if(e[f].toString()===A.args[0].toString()){e.splice(f,1);break}return this}}function h(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function u(a){return"object"===typeof a&&!!a&&a.constructor.toString()===
Array.toString()}function f(a,d,b){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,d,b){return{value:a,writable:!!d,enumerable:!1,configurable:!!b}}function e(a,d){var b=a,g=a,c=function(a,d){g=b;b=a;d.listener="__kbupdatelisteners";d.type="update";w(d)};return{get:function(){return b},set:function(a,h){var e=new q(this,d,"set",a,b,arguments,"__kblisteners");h?c(a,e):!0!==w(e)&&(c(a,e),this.callSubscribers(d,b,g))},configurable:!0,
enumerable:!0}}var m=[],r={},x={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},n=function(a){for(var d=
0,b=x[a.type],g=b.length;d!==g&&(b[d](a),!a._stopPropogration);d++);return a._preventDefault},p=function(a,d){if(!d._stopPropogration&&a)for(var b=0,g=a.length;b!==g&&(a[b](d),!d._stopPropogration);b++);},w=function(a){var d=a.local[a.listener];h(d)?(p(d[a.key],a),"__kblisteners"===a.listener?(p(d["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",p(a.local[a.listener][a.key],a),p(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(p(d["*"],a),a.fromListener="__kbupdatelisteners",
a.listener="__kbparentupdatelisteners",p(a.local[a.listener][a.key],a),p(a.local[a.listener]["*"],a))):u(d)&&(p(d,a),p(d["*"],a));return a._preventDefault};Object.defineProperties(m,{__kbname:c(y||"",!0,!0),__kbref:c(v?v.__kbref||v:m,!0,!0),__kbscopeString:c(z||"",!0,!0),__kbImmediateParent:c(v||null,!0,!0),splice:c(function(a,d,b){var g=new q(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),c=new l("splice",a,g,arguments);if(!0!==n(c)){var h=[],f=u(c.args[2]),k=void 0!==c.args[2]?
f?c.args[2].length:1:0,m=0;if(0!==d&&void 0!==this[c.key-1+c.args[1]]){for(var t=0,r=c.args[1];t<r;t++)if(m=c.key+t,g.key=m,g.type="remove",g.value=this[m],!0!==w(g)){h.push(this[m-h.length]);for(var p=c.key,v=this.length-1;p<v;p++)this[p]=this[p+1]}else--c.args[1];this.length-=c.args[1]}if(0!==k)for(f||(c.args[2]=[c.args[2]]),t=0,r=k;t<r;t++)if(m=c.key+t,g.key=m,g.type="add",g.listener="__kbdatacreatelisteners",g.value=c.args[2][t],!0!==w(g)){p=this.length;for(v=m;p>v;p--)void 0===this[p]?Object.defineProperty(this,
p,e.call(this,this[p-1],p)):this[p]=this[p-1];this[m]=c.args[2][t]}c.type="postsplice";n(c)}return h}),push:c(function(a){var d=new q(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),b=new l("push",this.length,d,arguments);!0!==n(b)&&(d.type="add",d.value=b.args[0],d.key=b.key,!0!==w(d)&&(Object.defineProperty(this,b.key,e.call(this,b.args[0],b.key)),b.type="postpush",n(b)));return this.length}),pop:c(function(){var a=new q(this,this.length-1,"pop",this[this.length-1],void 0,
arguments,"__kbdatadeletelisteners"),d=new l("pop",this.length-1,a,arguments);if(!0!==n(d)){var b=this[this.length-1];a.type="remove";if(!0!==w(a))return--this.length,d.type="postpop",n(d),b}return null}),shift:c(function(){var a=new q(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),d=new l("shift",0,a,arguments);if(!0!==n(d)){var b=this[d.key];a.type="remove";a.key=d.key;if(!0!==w(a)){for(var a=d.key,g=this.length-1;a<g;a++)this[a]=this[a+1];--this.length;d.type="postshift";n(d);
return b}}return null}),unshift:c(function(){var a=new q(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),d=new l("unshift",0,a,arguments);if(!0!==n(d)){for(var b=Array.prototype.slice.call(d.args),g=0,c=b.length;g<c;g++)a.key=g,a.type="add",a.value=b[g],!0===w(a)&&b.splice(g,1);if(0!==b.length){g=this.length-1+b.length;for(c=b.length;-1!==g;g--)g<c?this[g]=b[g]:void 0!==Object.getOwnPropertyDescriptor(this,g).value?Object.defineProperty(this,g,e.call(this,this[g-b.length],g)):
this[g]=this[g-b.length];d.type="postunshift";n(d)}}return this.length}),fill:c(function(a,d,b){var g=void 0!==d?Math.max(0,d):0,c=new q(this,g,"fill",a,this[g],arguments,"__kbdatalisteners"),g=new l("fill",g,c,arguments);if(!0!==n(g)){for(c=g.key;c<g.args[2];c++)this[c]=g.args[0];g.type="postfill";n(g)}return this}),reverse:c(function(){var a=new q(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new l("reverse",0,a,arguments);if(!0!==n(a)){for(var d=this.slice().reverse(),b=
0,g=this.length;b<g;b++)this[b]=d[b];a.type="postreverse";n(a)}return this}),sort:c(function(){var a=new q(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new l("sort",0,a,arguments);if(!0!==n(a)){for(var d=this.slice(),d=d.sort.apply(d,arguments),b=0,g=this.length;b<g;b++)this[b]=d[b];a.type="postsort";n(a)}return this}),add:c(function(a,d){var b=new q(this,a,"add",d,void 0,arguments,"__kbdatacreatelisteners"),g=new l("add",a,b,arguments);void 0===a?this.push(d):!0!==n(g)&&(void 0===
this[g.key]?!0!==w(b)&&(Object.defineProperty(this,g.key,e.call(this,g.args[1],g.key)),g.type="postadd",n(g)):console.error("Your attempting to add the index: ",g.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:c(function(a,d){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(d,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:c(function(a,d,b){var g=new q(this,
b||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),c=new l("add",b||d,g,arguments);!0!==n(c)&&!0!==w(g)&&(g=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,c.key,f(a,d,g)),c.type="postadd",n(c));return this}),set:c(function(a,d,b){var g=new q(this,a,"set",d,this[a],arguments,"__kblisteners"),c=new l("set",a,g,arguments);void 0===this[a]?this.add(a,d):!0!==n(c)&&(g.key=c.key,g.value=c.args[1],!0!==w(g)&&(void 0===Object.getOwnPropertyDescriptor(this,c.key).value?Object.getOwnPropertyDescriptor(this,
c.key).set(c.args[1],b):Object.defineProperty(this,c.key,e.call(this,c.args[1],c.key)),c.type="postset",n(c)));return this}),remove:c(function(a,d){var b=new q(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new l("remove",a,b,arguments);if(!0!==n(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the index: ",b.key," that does not exist on ",this),this;this.splice(b.key,b.args[1])}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,
function(d,b){if(u(b)||h(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,d,b){if(void 0!==r[a])for(var g=0,c=r[a].length;g<c;g++)r[a][g](a,d,b);if(void 0!==r["*"])for(g=0,c=r["*"].length;g<c;g++)r["*"][g](a,d,b);return this}),subscribe:c(function(a,d){var b=new q(this,a,"subscribe",this[a],void 0,arguments),b=new l("subscribe",a,b,arguments);!0!==n(b)&&(void 0===r[b.key]&&(r[b.key]=[]),r[b.key].push(d));return this}),unsubscribe:c(function(a,d){var b=new q(this,
a,"unsubscribe",this[a],void 0,arguments),b=new l("unsubscribe",a,b,arguments);if(!0!==n(b)&&void 0!==r[b.key]){var g=0,c=r[b.key].length;a:for(;g<c;g++)if(r[b.key][g].toString()===d.toString()){r[b.key].splice(g,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,d){-1!==Object.keys(x).indexOf(a)?x[a].push(d):console.error("There is no action listener by the name: ",
a);return this}),removeActionListener:c(function(a,d){if(-1!==Object.keys(x).indexOf(a))for(var b=0,g=x[a],c=g.length;b!==c;b++){if(g[b].toString()===d.toString()){g.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(m,{addDataListener:c(k("__kblisteners")),removeDataListener:c(t("__kblisteners")),addDataUpdateListener:c(k("__kbupdatelisteners")),removeDataUpdateListener:c(t("__kbupdatelisteners")),addDataCreateListener:c(k("__kbdatacreatelisteners")),
removeDataCreateListener:c(t("__kbdatacreatelisteners")),addDataRemoveListener:c(k("__kbdatadeletelisteners")),removeDataRemoveListener:c(t("__kbdatadeletelisteners"))});return m}}(),E=function(){return function(y,v,z){function q(a,d,b,g,c,h,e){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=h;this.type=b;this.listener=e;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=
a.___kbImmediateParent;this.value=g;this.oldValue=c}function l(a,d,b,g){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=b;this.args=g}function k(a,d){var b=m[d];return function(d,c){var e=new q(this,h(b)?d:"",a,h(b)?this[d]:"",h(b)?this[d]:"",arguments),e=new l(a,h(b)?d:"",e,arguments),f;!0!==n(e)&&(h(b)?(void 0===b[e.key]&&(b[e.key]=[]),f=b[e.key],f.push(e.args[1])):u(b)&&(void 0===b["*"]&&(b["*"]=
[]),f=e.args[1]&&"*"===e.args[1]?b["*"]:b,f.push(e.args[0])));return this}}function t(a,d){var b=m[d];return function(d,c){var e=new q(this,d,a,this[d],this[d],arguments),e=new l(a,d,e,arguments),f;if(!0!==n(e))if(h(b)){if(f=b[e.key])for(var k=0,m=f.length;k<m;k++)if(f[k].toString()===e.args[1].toString()){f.splice(k,1);break}}else if(u(b))for(void 0===b["*"]&&(b["*"]=[]),f=e.args[1]&&"*"===e.args[1]?b["*"]:b,k=0,m=f.length;k<m;k++)if(f[k].toString()===e.args[0].toString()){f.splice(k,1);break}return this}}
function h(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function u(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function f(a,d,b){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,d,b){return{value:a,writable:!!d,enumerable:!1,configurable:!!b}}function e(a,d){var b=a,c=a,e=function(a,d){c=b;b=a;d.listener="__kbupdatelisteners";d.type="update";w(d)};return{get:function(){return b},
set:function(a,f){var h=new q(this,d,"set",a,b,arguments,"__kblisteners");f?e(a,h):!0!==w(h)&&(e(a,h),this.callSubscribers(d,b,c))},configurable:!0,enumerable:!0}}var m={},r={},x={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},n=function(a){for(var d=0,b=x[a.type],
c=b.length;d!==c&&(b[d](a),!a._stopPropogration);d++);return a._preventDefault},p=function(a,d){if(!d._stopPropogration&&a)for(var b=0,c=a.length;b!==c&&(a[b](d),!d._stopPropogration);b++);},w=function(a){var d=a.local[a.listener];h(d)?(p(d[a.key],a),"__kblisteners"===a.listener?(p(d["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",p(a.local[a.listener][a.key],a),p(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(p(d["*"],a),a.fromListener="__kbupdatelisteners",
a.listener="__kbparentupdatelisteners",p(a.local[a.listener][a.key],a),p(a.local[a.listener]["*"],a))):u(d)&&(p(d,a),p(d["*"],a));return a._preventDefault};Object.defineProperties(m,{__kbname:c(y||"",!0,!0),__kbref:c(v?v.__kbref||v:m,!0,!0),__kbscopeString:c(z||"",!0,!0),__kbImmediateParent:c(v||null,!0,!0),add:c(function(a,d){var b=new q(this,a,"add",d,void 0,arguments,"__kbdatacreatelisteners"),c=new l("add",a,b,arguments);!0!==n(c)&&(void 0===this[c.key]?!0!==w(b)&&(Object.defineProperty(this,
c.key,e.call(this,c.args[1],c.key)),c.type="postadd",n(c)):console.error("Your attempting to add the property: ",c.key," that already exists on",this,"try using set or direct set instead"));return this}),addPointer:c(function(a,d,b){var c=new q(this,b||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),e=new l("add",b||d,c,arguments);!0!==n(e)&&!0!==w(c)&&(c=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,e.key,f(a,d,c)),e.type="postadd",n(e));return this}),prototype:c(function(a,
d){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(d,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:c(function(a,d,b){var c=new q(this,a,"set",d,this[a],arguments,"__kblisteners"),f=new l("set",a,c,arguments);void 0===this[a]?this.add(f.key,f.args[1]):!0!==n(f)&&(c.key=f.key,c.value=f.args[1],!0!==w(c)&&(void 0===Object.getOwnPropertyDescriptor(this,f.key).value?Object.getOwnPropertyDescriptor(this,f.key).set.call(this,
f.args[1],b):Object.defineProperty(this,f.key,e.call(this,f.args[1],f.key)),f.type="postset",n(f)));return this}),remove:c(function(a){var d=new q(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new l("remove",a,d,arguments);if(!0!==n(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",b.key," that does not exist on ",this),this;!0!==w(d)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type=
"postremove",n(b))}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,function(d,b){if(u(b)||h(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,d,b){if(void 0!==r[a])for(var c=0,e=r[a].length;c<e;c++)r[a][c](a,d,b);if(void 0!==r["*"])for(c=0,e=r["*"].length;c<e;c++)r["*"][c](a,d,b);return this}),subscribe:c(function(a,d){var b=new q(this,a,"subscribe",this[a],void 0,arguments),b=new l("subscribe",a,b,arguments);!0!==n(b)&&(void 0===r[b.key]&&
(r[b.key]=[]),r[b.key].push(d));return this}),unsubscribe:c(function(a,d){var b=new q(this,a,"unsubscribe",this[a],void 0,arguments),b=new l("unsubscribe",a,b,arguments);if(!0!==n(b)&&void 0!==r[b.key]){var c=0,e=r[b.key].length;a:for(;c<e;c++)if(r[b.key][c].toString()===d.toString()){r[b.key].splice(c,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,
d){-1!==Object.keys(x).indexOf(a)?x[a].push(d):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:c(function(a,d){if(-1!==Object.keys(x).indexOf(a))for(var b=0,c=x[a],e=c.length;b!==e;b++){if(c[b].toString()===d.toString()){c.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:c(function(){},!0),onremove:c(function(){},!0),onset:c(function(){},!0),onupdate:c(function(){},!0)});Object.defineProperties(m,
{addDataListener:c(k("addDataListener","__kblisteners")),removeDataListener:c(t("removeDataListener","__kblisteners")),addDataUpdateListener:c(k("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(t("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:c(k("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:c(t("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:c(k("addDataRemoveListener","__kbdatadeletelisteners")),
removeDataRemoveListener:c(t("removeDataRemoveListener","__kbdatadeletelisteners"))});return m}}(),B=function(y){return function(){function v(k,t,h,l){var f=k.tagName.toLowerCase();void 0===t&&(t=[]);void 0===h&&(h={});h.filters||(h.filters={});h.sessionStorage||(h.sessionStorage=!1);h.localStorage||(h.localStorage=!1);h.store||(h.store=!1);for(var c=0,e=k.attributes.length;c<e;c++)h[attributes[c].name]||(h[attributes[c].name]="");void 0===l&&(l={});if(void 0!==k.kb_maps){var m=k.kb_maps;k=k.kb_mapper.kb_viewmodel;
c=0;for(e=m.length;c<e;c++)l[m[c].prop]=k.getScope(Object.keys(m[c])[0].key)}return v.createViewModel(f,t,h,l)}var z=y("Model"),q={},l="id filters class sessionStorage localStorage store component".split(" ");return v={ignore:function(k){-1===l.indexOf(k)&&l.push(k);return this},unignore:function(k){-1!==l.indexOf(k)&&l.splice(l.indexOf(k),1);return this},createViewModel:function(k,l,h,u){if(v.isRegistered(k)){var f=y(k),c=q[k];f.__proto__=void 0!==c.prototype?c.prototype:c.__proto__;if(h){var e=
0;h=Object.keys(h);for(var m=h.length;e<m;e++)f.isObservable(u,h[e])?f.addPointer(u,h[e]):f.add(h[e],u[h[e]])}if("function"===typeof c)for(c.apply(f,l),e=0,h=Object.keys(f),m=h.length;e<m;e++)f.isObservable(f,h[e])||f.set(h[e],f[h[e]]);else for(e=0,h=Object.keys(c),m=h.length;e<m;e++)f.isObservable(c,h[e])?(f[h[e]]&&f.remove(h[e]),f.addPointer(c,h[e])):f.set(h[e],c[h[e]]);if(u)for(e=0,h=Object.keys(u),m=h.length;e<m;e++)f.isObservable(u,h[e])?(void 0!==f[h[e]]&&f.remove(h[e]),f.addPointer(u,h[e])):
f.set(h[e],u[h[e]]);if(f.sessionStorage){if(l=sessionStorage.getItem(f.id||k))for(l=JSON.parse(l),e=0,h=Object.keys(l),m=h.length;e<m;e++)f.set(h[e],l[h[e]]);else sessionStorage.setItem(f.id||k,f.stringify());f.addChildDataUpdateListener("*",function(){sessionStorage.setItem(f.id||k,f.stringify())})}if(f.localStorage){if(l=localStorage.getItem(f.id||k))for(l=JSON.parse(l),e=0,h=Object.keys(l),m=h.length;e<m;e++)f.set(h[e],l[h[e]]);else localStorage.setItem(f.id||k,f.stringify());f.addChildDataUpdateListener("*",
function(){localStorage.setItem(f.id||k,f.stringify())})}f.store&&z.set(f.id||k,f);return f}console.error("There is no viewmodel by the name %o",k);return null},isRegistered:function(k){return void 0!==q[k]},register:function(k,l){q[k]=l;return this},model:function(k){return k?z[k]:z}}}}(function(y,v){return function(z,q){function l(a){return"[object Array]"===Object.prototype.toString.call(a)}function k(a){return"[object Object]"===Object.prototype.toString.call(a)}function t(a,b){return b?a[b]?
void 0===Object.getOwnPropertyDescriptor(a,b).value:!1:void 0!==a.__kbname}function h(a){return a.split(".").filter(function(a){return 0!==a.length})}function u(a,b){function c(a){b.splice(0,1);return 0===b.length?a:a[b[0]]?c(a[b[0]]):a}return(b=h(b))&&1!==b.length?c(a[b[0]]):b&&b.length?a[b[0]]:a}function f(a){var b=a.key.split(".");if(1===b.length&&"*"!==a.key)return!1;"*"!==a.key?(a.preventDefault(),u(a.event.local,b.slice(0,b.length-1).join("."))[a.type](b[b.length-1],a.args[1])):(a.preventDefault(),
-1!==a.type.toLowerCase().indexOf("update")?a.event.local.addChildDataUpdateListener("*",a.args[1]):a.event.local.addChildDataListener("*",a.args[1]))}function c(a){var b=a.key.split(".");if(1===b.length&&"*"!==a.key)return!1;if("*"!==a.key)a.preventDefault(),u(a.event.local,b.slice(0,b.length-1).join("."))[a.type](b[b.length-1],a.args[1]);else for(var b=Object.keys(a.event.local).filter(function(b){return k(a.event.local[b])||l(a.event.local[b])}),c=0,e=b.length;c<e;c++)a.event.local[b[c]].subscribe(a.key,
a.args[1])}function e(a){void 0===a.parseData&&a.prototype("parseData",w);void 0===a.isArray&&a.prototype("isArray",l);void 0===a.isObject&&a.prototype("isObject",k);void 0===a.isObservable&&a.prototype("isObservable",t);void 0===a.updateName&&a.prototype("updateName",x);void 0===a.getScopeByScopeString&&a.prototype("getScopeByScopeString",u);void 0===a.addChildDataListener&&a.prototype("addChildDataListener",m("__kbparentlisteners"));void 0===a.removeChildDataListener&&a.prototype("removeChildDataListener",
r("__kbparentlisteners"));void 0===a.addChildDataUpdateListener&&a.prototype("addChildDataUpdateListener",m("__kbparentupdatelisteners"));void 0===a.removeChildDataUpdateListener&&a.prototype("removeChildDataUpdateListener",r("__kbparentupdatelisteners"));return a.addActionListener("add",n).addActionListener("set",p).addActionListener("subscribe",c).addActionListener("unsubscribe",c).addActionListener("addDataListener",f).addActionListener("addDataUpdateListener",f).addActionListener("addDataCreateListener",
f).addActionListener("addDataRemoveListener",f).addActionListener("removeDataListener",f).addActionListener("removeDataUpdateListener",f).addActionListener("removeDataCreateListener",f).addActionListener("removeDataRemoveListener",f)}function m(a){return function(b,c){function e(b,c,g){var f=Object.keys(b).filter(function(a){return k(b[a])||l(b[a])});void 0===b[a][c]&&(b[a][c]=[]);b[a][c].push(g);for(var h=0,m=f.length;h<m;h++)e(b[f[h]],c,g)}e(this,b,c);return this}}function r(a){return function(b,
c){function e(b,c,g){var f=Object.keys(b).filter(function(a){return k(b[a])||l(b[a])}),h=0,m=b[a][c].length;a:for(;h<m;h++)if(b[a][c][h].toString()===g.toString()){b[a][c].splice(h,1);break a}h=0;for(m=f.length;h<m;h++)e(b[f[h]],c,g)}e(this,b,c);return this}}function x(c){"string"===typeof c&&(a.name=c);return this}function n(a){if((k(a.args[1])||l(a.args[1]))&&!t(a.args[1])){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+a.key,c=(k(a.args[1])?v:y)(b.__kbname,
b,c);b.add(a.key,c);e(b[a.key]).parseData(a.args[1])}}function p(a){if((k(a.args[1])||l(a.args[1]))&&!t(a.args[1])){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+a.key,c=(k(a.args[1])?v:y)(b.__kbname,b,c);b.set(a.key,c);e(b[a.key]).parseData(a.args[1])}}function w(a){for(var b=0,c=Object.keys(a),e=c.length;b<e;b++)this.set(c[b],a[c[b]]);return this}var a={name:z};_data=("string"===typeof q&&"array"===q.toLowercase()?y:v)(a.name,void 0,"").addPointer(a,
"name","__kbname");e(_data);return _data}}(D,E));window.define&&window.require?define([],function(){return B}):window.module&&(module.exports=B);return B}();
