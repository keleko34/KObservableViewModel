var KObservableViewmodel=function(){var D=function(){return function(A,v,B){function k(a,d,b,f,c,r){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=r;this.type=b;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=f;this.oldValue=c}function g(a,d,b,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=b;this.args=f}function l(a,d){var b=x[d];return function(d,c){var r=new k(this,p(b)?d:"",a,p(b)?this[d]:"",p(b)?this[d]:"",arguments),r=new g(a,p(b)?d:"",r,arguments),t;!0!==n(r)&&(p(b)?(void 0===b[r.key]&&(b[r.key]=[]),t=b[r.key],t.push(r.args[1])):h(b)&&(void 0===b["*"]&&(b["*"]=[]),t=r.args[1]&&"*"===r.args[1]?b["*"]:b,t.push(r.args[0])));return this}}function e(a,d){var b=x[d];return function(d,c){var r=new k(this,d,a,this[d],
this[d],arguments),r=new g(a,d,r,arguments),t;if(!0!==n(r))if(p(b)){if(t=b[r.key])for(var e=0,l=t.length;e<l;e++)if(t[e].toString()===r.args[1].toString()){t.splice(e,1);break}}else if(h(b))for(void 0===b["*"]&&(b["*"]=[]),t=r.args[1]&&"*"===r.args[1]?b["*"]:b,e=0,l=t.length;e<l;e++)if(t[e].toString()===r.args[0].toString()){t.splice(e,1);break}return this}}function p(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function h(a){return"object"===typeof a&&!!a&&a.constructor.toString()===
Array.toString()}function y(a,d,b){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,d,b){return{value:a,writable:!!d,enumerable:!1,configurable:!!b}}function u(a,d){var b=a,f=a,c=function(a,d){f=b;b=a;d.listener="__kbupdatelisteners";d.type="update";w(d)};return{get:function(){return b},set:function(a,e){var g=new k(this,d,"set",a,b,arguments,"__kblisteners");e?c(a,g):!0!==w(g)&&(c(a,g),this.callSubscribers(d,b,f))},configurable:!0,
enumerable:!0}}var x=[],m={},z={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},n=function(a){for(var d=
0,b=z[a.type],f=b.length;d!==f&&(b[d](a),!a._stopPropogration);d++);return a._preventDefault},q=function(a,d){if(!d._stopPropogration&&a)for(var b=0,f=a.length;b!==f&&(a[b](d),!d._stopPropogration);b++);},w=function(a){var d=a.local[a.listener];p(d)?(q(d[a.key],a),"__kblisteners"===a.listener?(q(d["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",q(a.local[a.listener][a.key],a),q(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(q(d["*"],a),a.fromListener="__kbupdatelisteners",
a.listener="__kbparentupdatelisteners",q(a.local[a.listener][a.key],a),q(a.local[a.listener]["*"],a))):h(d)&&(q(d,a),q(d["*"],a));return a._preventDefault};Object.defineProperties(x,{__kbname:c(A||"",!0,!0),__kbref:c(v?v.__kbref||v:x,!0,!0),__kbscopeString:c(B||"",!0,!0),__kbImmediateParent:c(v||null,!0,!0),splice:c(function(a,d,b){var f=new k(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),c=new g("splice",a,f,arguments);if(!0!==n(c)){var r=[],e=h(c.args[2]),l=void 0!==c.args[2]?
e?c.args[2].length:1:0,m=0;if(0!==d&&void 0!==this[c.key-1+c.args[1]]){for(var p=0,y=c.args[1];p<y;p++)if(m=c.key+p,f.key=m,f.type="remove",f.value=this[m],!0!==w(f)){r.push(this[m-r.length]);for(var q=c.key,v=this.length-1;q<v;q++)this[q]=this[q+1]}else--c.args[1];this.length-=c.args[1]}if(0!==l)for(e||(c.args[2]=[c.args[2]]),p=0,y=l;p<y;p++)if(m=c.key+p,f.key=m,f.type="add",f.listener="__kbdatacreatelisteners",f.value=c.args[2][p],!0!==w(f)){q=this.length;for(v=m;q>v;q--)void 0===this[q]?Object.defineProperty(this,
q,u.call(this,this[q-1],q)):this[q]=this[q-1];this[m]=c.args[2][p]}c.type="postsplice";n(c)}return r}),push:c(function(a){var d=new k(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),b=new g("push",this.length,d,arguments);!0!==n(b)&&(d.type="add",d.value=b.args[0],d.key=b.key,!0!==w(d)&&(Object.defineProperty(this,b.key,u.call(this,b.args[0],b.key)),b.type="postpush",n(b)));return this.length}),pop:c(function(){var a=new k(this,this.length-1,"pop",this[this.length-1],void 0,
arguments,"__kbdatadeletelisteners"),d=new g("pop",this.length-1,a,arguments);if(!0!==n(d)){var b=this[this.length-1];a.type="remove";if(!0!==w(a))return--this.length,d.type="postpop",n(d),b}return null}),shift:c(function(){var a=new k(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),d=new g("shift",0,a,arguments);if(!0!==n(d)){var b=this[d.key];a.type="remove";a.key=d.key;if(!0!==w(a)){for(var a=d.key,f=this.length-1;a<f;a++)this[a]=this[a+1];--this.length;d.type="postshift";n(d);
return b}}return null}),unshift:c(function(){var a=new k(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),d=new g("unshift",0,a,arguments);if(!0!==n(d)){for(var b=Array.prototype.slice.call(d.args),f=0,c=b.length;f<c;f++)a.key=f,a.type="add",a.value=b[f],!0===w(a)&&b.splice(f,1);if(0!==b.length){f=this.length-1+b.length;for(c=b.length;-1!==f;f--)f<c?this[f]=b[f]:void 0!==Object.getOwnPropertyDescriptor(this,f).value?Object.defineProperty(this,f,u.call(this,this[f-b.length],f)):
this[f]=this[f-b.length];d.type="postunshift";n(d)}}return this.length}),fill:c(function(a,d,b){var f=void 0!==d?Math.max(0,d):0,c=new k(this,f,"fill",a,this[f],arguments,"__kbdatalisteners"),f=new g("fill",f,c,arguments);if(!0!==n(f)){for(c=f.key;c<f.args[2];c++)this[c]=f.args[0];f.type="postfill";n(f)}return this}),reverse:c(function(){var a=new k(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new g("reverse",0,a,arguments);if(!0!==n(a)){for(var d=this.slice().reverse(),b=
0,f=this.length;b<f;b++)this[b]=d[b];a.type="postreverse";n(a)}return this}),sort:c(function(){var a=new k(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new g("sort",0,a,arguments);if(!0!==n(a)){for(var d=this.slice(),d=d.sort.apply(d,arguments),b=0,f=this.length;b<f;b++)this[b]=d[b];a.type="postsort";n(a)}return this}),add:c(function(a,d){var b=new k(this,a,"add",d,void 0,arguments,"__kbdatacreatelisteners"),f=new g("add",a,b,arguments);void 0===a?this.push(d):!0!==n(f)&&(void 0===
this[f.key]?!0!==w(b)&&(Object.defineProperty(this,f.key,u.call(this,f.args[1],f.key)),f.type="postadd",n(f)):console.error("Your attempting to add the index: ",f.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:c(function(a,d){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(d,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:c(function(a,d,b){var f=new k(this,
b||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),c=new g("add",b||d,f,arguments);!0!==n(c)&&!0!==w(f)&&(f=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,c.key,y(a,d,f)),c.type="postadd",n(c));return this}),set:c(function(a,d,b){var f=new k(this,a,"set",d,this[a],arguments,"__kblisteners"),c=new g("set",a,f,arguments);void 0===this[a]?this.add(a,d):!0!==n(c)&&(f.key=c.key,f.value=c.args[1],!0!==w(f)&&(void 0===Object.getOwnPropertyDescriptor(this,c.key).value?Object.getOwnPropertyDescriptor(this,
c.key).set(c.args[1],b):Object.defineProperty(this,c.key,u.call(this,c.args[1],c.key)),c.type="postset",n(c)));return this}),remove:c(function(a,d){var b=new k(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new g("remove",a,b,arguments);if(!0!==n(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the index: ",b.key," that does not exist on ",this),this;this.splice(b.key,b.args[1])}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,
function(d,b){if(h(b)||p(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,d,b){if(void 0!==m[a])for(var f=0,c=m[a].length;f<c;f++)m[a][f](a,d,b);if(void 0!==m["*"])for(f=0,c=m["*"].length;f<c;f++)m["*"][f](a,d,b);return this}),subscribe:c(function(a,d){var b=new k(this,a,"subscribe",this[a],void 0,arguments),b=new g("subscribe",a,b,arguments);!0!==n(b)&&(void 0===m[b.key]&&(m[b.key]=[]),m[b.key].push(d));return this}),unsubscribe:c(function(a,d){var b=new k(this,
a,"unsubscribe",this[a],void 0,arguments),b=new g("unsubscribe",a,b,arguments);if(!0!==n(b)&&void 0!==m[b.key]){var c=0,e=m[b.key].length;a:for(;c<e;c++)if(m[b.key][c].toString()===d.toString()){m[b.key].splice(c,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,d){-1!==Object.keys(z).indexOf(a)?z[a].push(d):console.error("There is no action listener by the name: ",
a);return this}),removeActionListener:c(function(a,d){if(-1!==Object.keys(z).indexOf(a))for(var b=0,c=z[a],e=c.length;b!==e;b++){if(c[b].toString()===d.toString()){c.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(x,{addDataListener:c(l("__kblisteners")),removeDataListener:c(e("__kblisteners")),addDataUpdateListener:c(l("__kbupdatelisteners")),removeDataUpdateListener:c(e("__kbupdatelisteners")),addDataCreateListener:c(l("__kbdatacreatelisteners")),
removeDataCreateListener:c(e("__kbdatacreatelisteners")),addDataRemoveListener:c(l("__kbdatadeletelisteners")),removeDataRemoveListener:c(e("__kbdatadeletelisteners"))});return x}}(),E=function(){return function(A,v,B){function k(a,d,b,c,e,r,g){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=r;this.type=b;this.listener=g;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=
a.___kbImmediateParent;this.value=c;this.oldValue=e}function g(a,d,b,c){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=b;this.args=c}function l(a,d){var b=x[d];return function(d,c){var e=new k(this,p(b)?d:"",a,p(b)?this[d]:"",p(b)?this[d]:"",arguments),e=new g(a,p(b)?d:"",e,arguments),t;!0!==n(e)&&(p(b)?(void 0===b[e.key]&&(b[e.key]=[]),t=b[e.key],t.push(e.args[1])):h(b)&&(void 0===b["*"]&&(b["*"]=
[]),t=e.args[1]&&"*"===e.args[1]?b["*"]:b,t.push(e.args[0])));return this}}function e(a,d){var b=x[d];return function(d,c){var e=new k(this,d,a,this[d],this[d],arguments),e=new g(a,d,e,arguments),t;if(!0!==n(e))if(p(b)){if(t=b[e.key])for(var l=0,m=t.length;l<m;l++)if(t[l].toString()===e.args[1].toString()){t.splice(l,1);break}}else if(h(b))for(void 0===b["*"]&&(b["*"]=[]),t=e.args[1]&&"*"===e.args[1]?b["*"]:b,l=0,m=t.length;l<m;l++)if(t[l].toString()===e.args[0].toString()){t.splice(l,1);break}return this}}
function p(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function h(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function y(a,d,b){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,d,b){return{value:a,writable:!!d,enumerable:!1,configurable:!!b}}function u(a,d){var b=a,c=a,e=function(a,d){c=b;b=a;d.listener="__kbupdatelisteners";d.type="update";w(d)};return{get:function(){return b},
set:function(a,g){var h=new k(this,d,"set",a,b,arguments,"__kblisteners");g?e(a,h):!0!==w(h)&&(e(a,h),this.callSubscribers(d,b,c))},configurable:!0,enumerable:!0}}var x={},m={},z={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},n=function(a){for(var d=0,b=z[a.type],
c=b.length;d!==c&&(b[d](a),!a._stopPropogration);d++);return a._preventDefault},q=function(a,d){if(!d._stopPropogration&&a)for(var b=0,c=a.length;b!==c&&(a[b](d),!d._stopPropogration);b++);},w=function(a){var d=a.local[a.listener];p(d)?(q(d[a.key],a),"__kblisteners"===a.listener?(q(d["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",q(a.local[a.listener][a.key],a),q(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(q(d["*"],a),a.fromListener="__kbupdatelisteners",
a.listener="__kbparentupdatelisteners",q(a.local[a.listener][a.key],a),q(a.local[a.listener]["*"],a))):h(d)&&(q(d,a),q(d["*"],a));return a._preventDefault};Object.defineProperties(x,{__kbname:c(A||"",!0,!0),__kbref:c(v?v.__kbref||v:x,!0,!0),__kbscopeString:c(B||"",!0,!0),__kbImmediateParent:c(v||null,!0,!0),add:c(function(a,d){var b=new k(this,a,"add",d,void 0,arguments,"__kbdatacreatelisteners"),c=new g("add",a,b,arguments);!0!==n(c)&&(void 0===this[c.key]?!0!==w(b)&&(Object.defineProperty(this,
c.key,u.call(this,c.args[1],c.key)),c.type="postadd",n(c)):console.error("Your attempting to add the property: ",c.key," that already exists on",this,"try using set or direct set instead"));return this}),addPointer:c(function(a,d,b){var c=new k(this,b||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),e=new g("add",b||d,c,arguments);!0!==n(e)&&!0!==w(c)&&(c=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,e.key,y(a,d,c)),e.type="postadd",n(e));return this}),prototype:c(function(a,
d){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(d,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:c(function(a,d,b){var c=new k(this,a,"set",d,this[a],arguments,"__kblisteners"),e=new g("set",a,c,arguments);void 0===this[a]?this.add(e.key,e.args[1]):!0!==n(e)&&(c.key=e.key,c.value=e.args[1],!0!==w(c)&&(void 0===Object.getOwnPropertyDescriptor(this,e.key).value?Object.getOwnPropertyDescriptor(this,e.key).set.call(this,
e.args[1],b):Object.defineProperty(this,e.key,u.call(this,e.args[1],e.key)),e.type="postset",n(e)));return this}),remove:c(function(a){var d=new k(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new g("remove",a,d,arguments);if(!0!==n(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",b.key," that does not exist on ",this),this;!0!==w(d)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type=
"postremove",n(b))}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,function(d,b){if(h(b)||p(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,d,b){if(void 0!==m[a])for(var c=0,e=m[a].length;c<e;c++)m[a][c](a,d,b);if(void 0!==m["*"])for(c=0,e=m["*"].length;c<e;c++)m["*"][c](a,d,b);return this}),subscribe:c(function(a,d){var b=new k(this,a,"subscribe",this[a],void 0,arguments),b=new g("subscribe",a,b,arguments);!0!==n(b)&&(void 0===m[b.key]&&
(m[b.key]=[]),m[b.key].push(d));return this}),unsubscribe:c(function(a,d){var b=new k(this,a,"unsubscribe",this[a],void 0,arguments),b=new g("unsubscribe",a,b,arguments);if(!0!==n(b)&&void 0!==m[b.key]){var c=0,e=m[b.key].length;a:for(;c<e;c++)if(m[b.key][c].toString()===d.toString()){m[b.key].splice(c,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,
d){-1!==Object.keys(z).indexOf(a)?z[a].push(d):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:c(function(a,d){if(-1!==Object.keys(z).indexOf(a))for(var b=0,c=z[a],e=c.length;b!==e;b++){if(c[b].toString()===d.toString()){c.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:c(function(){},!0),onremove:c(function(){},!0),onset:c(function(){},!0),onupdate:c(function(){},!0)});Object.defineProperties(x,
{addDataListener:c(l("addDataListener","__kblisteners")),removeDataListener:c(e("removeDataListener","__kblisteners")),addDataUpdateListener:c(l("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(e("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:c(l("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:c(e("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:c(l("addDataRemoveListener","__kbdatadeletelisteners")),
removeDataRemoveListener:c(e("removeDataRemoveListener","__kbdatadeletelisteners"))});return x}}(),C=function(A){return function(){var v=A("Model"),B={},k="id filters class sessionStorage localStorage store component".split(" ");return{ignore:function(g){-1===k.indexOf(g)&&k.push(g);return this},unignore:function(g){-1!==k.indexOf(g)&&k.splice(k.indexOf(g),1);return this},createViewModel:function(g,l,e,p){if(KB_Model.isRegistered(g)){var h=A(g),k=B[g];h.__proto__=void 0!==k.prototype?k.prototype:
k.__proto__;if(e){var c=0;e=Object.keys(e);for(var u=e.length;c<u;c++)h.isObservable(p,e[c])?h.addPointer(p,e[c]):h.add(e[c],p[e[c]])}if("function"===typeof k)for(k.apply(h,l),c=0,e=Object.keys(h),u=e.length;c<u;c++)h.isObservable(h,e[c])||h.set(e[c],h[e[c]]);else for(c=0,e=Object.keys(k),u=e.length;c<u;c++)h.isObservable(k,e[c])?(h[e[c]]&&h.remove(e[c]),h.addPointer(k,e[c])):h.set(e[c],k[e[c]]);if(p)for(c=0,e=Object.keys(p),u=e.length;c<u;c++)h.isObservable(p,e[c])?(void 0!==h[e[c]]&&h.remove(e[c]),
h.addPointer(p,e[c])):h.set(e[c],p[e[c]]);if(h.sessionStorage){if(l=sessionStorage.getItem(h.id||g))for(l=JSON.parse(l),c=0,e=Object.keys(l),u=e.length;c<u;c++)h.set(e[c],l[e[c]]);else sessionStorage.setItem(h.id||g,h.stringify());h.addChildDataUpdateListener("*",function(){sessionStorage.setItem(h.id||g,h.stringify())})}if(h.localStorage){if(l=localStorage.getItem(h.id||g))for(l=JSON.parse(l),c=0,e=Object.keys(l),u=e.length;c<u;c++)h.set(e[c],l[e[c]]);else localStorage.setItem(h.id||g,h.stringify());
h.addChildDataUpdateListener("*",function(){localStorage.setItem(h.id||g,h.stringify())})}h.store&&v.set(h.id||g,h);return h}console.error("There is no viewmodel by the name %o",g);return null},isRegistered:function(g){return void 0!==B[g]},register:function(g,l){B[g]=l;return this},model:function(g){return g?v[g]:v}}}}(function(A,v){return function(B,k){function g(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"[object Object]"===Object.prototype.toString.call(a)}
function e(a,b){return b?a[b]?void 0===Object.getOwnPropertyDescriptor(a,b).value:!1:void 0!==a.__kbname}function p(a){return a.split(".").filter(function(a){return 0!==a.length})}function h(a,b){function c(a){b.splice(0,1);return 0===b.length?a:a[b[0]]?c(a[b[0]]):a}return(b=p(b))&&1!==b.length?c(a[b[0]]):b&&b.length?a[b[0]]:a}function y(a){var b=a.key.split(".");if(1===b.length&&"*"!==a.key)return!1;"*"!==a.key?(a.preventDefault(),h(a.event.local,b.slice(0,b.length-1).join("."))[a.type](b[b.length-
1],a.args[1])):(a.preventDefault(),-1!==a.type.toLowerCase().indexOf("update")?a.event.local.addChildDataUpdateListener("*",a.args[1]):a.event.local.addChildDataListener("*",a.args[1]))}function c(a){var b=a.key.split(".");if(1===b.length&&"*"!==a.key)return!1;if("*"!==a.key)a.preventDefault(),h(a.event.local,b.slice(0,b.length-1).join("."))[a.type](b[b.length-1],a.args[1]);else for(var b=Object.keys(a.event.local).filter(function(b){return l(a.event.local[b])||g(a.event.local[b])}),c=0,e=b.length;c<
e;c++)a.event.local[b[c]].subscribe(a.key,a.args[1])}function u(a){void 0===a.parseData&&a.prototype("parseData",w);void 0===a.isArray&&a.prototype("isArray",g);void 0===a.isObject&&a.prototype("isObject",l);void 0===a.isObservable&&a.prototype("isObservable",e);void 0===a.updateName&&a.prototype("updateName",z);void 0===a.getScopeByScopeString&&a.prototype("getScopeByScopeString",h);void 0===a.addChildDataListener&&a.prototype("addChildDataListener",x("__kbparentlisteners"));void 0===a.removeChildDataListener&&
a.prototype("removeChildDataListener",m("__kbparentlisteners"));void 0===a.addChildDataUpdateListener&&a.prototype("addChildDataUpdateListener",x("__kbparentupdatelisteners"));void 0===a.removeChildDataUpdateListener&&a.prototype("removeChildDataUpdateListener",m("__kbparentupdatelisteners"));return a.addActionListener("add",n).addActionListener("set",q).addActionListener("subscribe",c).addActionListener("unsubscribe",c).addActionListener("addDataListener",y).addActionListener("addDataUpdateListener",
y).addActionListener("addDataCreateListener",y).addActionListener("addDataRemoveListener",y).addActionListener("removeDataListener",y).addActionListener("removeDataUpdateListener",y).addActionListener("removeDataCreateListener",y).addActionListener("removeDataRemoveListener",y)}function x(a){return function(b,c){function e(b,c,f){var h=Object.keys(b).filter(function(a){return l(b[a])||g(b[a])});void 0===b[a][c]&&(b[a][c]=[]);b[a][c].push(f);for(var k=0,m=h.length;k<m;k++)e(b[h[k]],c,f)}e(this,b,c);
return this}}function m(a){return function(b,c){function e(b,c,f){var h=Object.keys(b).filter(function(a){return l(b[a])||g(b[a])}),k=0,m=b[a][c].length;a:for(;k<m;k++)if(b[a][c][k].toString()===f.toString()){b[a][c].splice(k,1);break a}k=0;for(m=h.length;k<m;k++)e(b[h[k]],c,f)}e(this,b,c);return this}}function z(c){"string"===typeof c&&(a.name=c);return this}function n(a){if((l(a.args[1])||g(a.args[1]))&&!e(a.args[1])){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?
".":"")+a.key,c=(l(a.args[1])?v:A)(b.__kbname,b,c);b.add(a.key,c);u(b[a.key]).parseData(a.args[1])}}function q(a){if((l(a.args[1])||g(a.args[1]))&&!e(a.args[1])){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+a.key,c=(l(a.args[1])?v:A)(b.__kbname,b,c);b.set(a.key,c);u(b[a.key]).parseData(a.args[1])}}function w(a){for(var b=0,c=Object.keys(a),e=c.length;b<e;b++)this.set(c[b],a[c[b]]);return this}var a={name:B};_data=("string"===typeof k&&"array"===
k.toLowercase()?A:v)(a.name,void 0,"").addPointer(a,"name","__kbname");u(_data);return _data}}(D,E));window.define&&window.require?define([],function(){return C}):window.module&&(module.exports=C);return C}();
