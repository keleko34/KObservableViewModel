var KObservableViewmodel=function(){var C=function(){return function(y,q,z){function r(a,e,b,d,B,c,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=e;this.arguments=c;this.type=b;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=B;this.stopChange=f}function l(a,e,b,d){this.stopPropogation=function(){this._stopPropogration=!0};
this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=e;this.event=b;this.args=d}function h(a,e){var b=t[e];return function(d,e){var c=new r(this,f(b)?d:"",a,f(b)?this[d]:"",f(b)?this[d]:"",arguments),c=new l(a,f(b)?d:"",c,arguments),g;!0!==m(c)&&(f(b)?(void 0===b[c.key]&&(b[c.key]=[]),g=b[c.key],g.push(c.args[1])):w(b)&&(void 0===b["*"]&&(b["*"]=[]),g=c.args[1]&&"*"===c.args[1]?b["*"]:b,g.push(c.args[0])));return this}}function n(a,e){var b=t[e];return function(d,e){var c=
new r(this,d,a,this[d],this[d],arguments),c=new l(a,d,c,arguments),g;if(!0!==m(c))if(f(b)){if(g=b[c.key])for(var h=0,k=g.length;h<k;h++)if(g[h].toString()===c.args[1].toString()){g.splice(h,1);break}}else if(w(b))for(void 0===b["*"]&&(b["*"]=[]),g=c.args[1]&&"*"===c.args[1]?b["*"]:b,h=0,k=g.length;h<k;h++)if(g[h].toString()===c.args[0].toString()){g.splice(h,1);break}return this}}function f(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function w(a){return"object"===
typeof a&&!!a&&a.constructor.toString()===Array.toString()}function k(a,e,b){return{get:function(){return a[e]},set:function(b){(this._stopChange?a.stopChange():a)[e]=b;this._stopChange=void 0},enumerable:b.enumerable,configurable:b.configurable}}function c(a,e,b){return{value:a,writable:!!e,enumerable:!1,configurable:!!b}}function g(a,e){var b=a,d=a;return{get:function(){return b},set:function(a){var c=new r(this,e,"set",a,b,arguments,"__kblisteners",this._stopChange);!0!==v(c)&&(d=b,b=a,c.stopChange||
(c.listener="__kbupdatelisteners",c.type="update",v(c)),this._stopChange||this.callSubscribers(e,b,d));this._stopChange=void 0},configurable:!0,enumerable:!0}}var t=[],p={},x={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],
removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},m=function(a){for(var e=0,b=x[a.type],d=b.length;e!==d&&(b[e](a),!a._stopPropogration);e++);return a._preventDefault},u=function(a,e){if(!e._stopPropogration&&a)for(var b=0,d=a.length;b!==d&&(a[b](e),!e._stopPropogration);b++);},v=function(a){var e=a.local[a.listener];f(e)?(u(e[a.key],a),"__kblisteners"===a.listener?(u(e["*"],a),a.fromListener="__kblisteners",a.listener=
"__kbparentlisteners",u(a.local[a.listener][a.key],a),u(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(u(e["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",u(a.local[a.listener][a.key],a),u(a.local[a.listener]["*"],a))):w(e)&&(u(e,a),u(e["*"],a));return a._preventDefault};Object.defineProperties(t,{__kbname:c(y||"",!0,!0),__kbref:c(q?q.__kbref||q:t,!0,!0),__kbscopeString:c(z||"",!0,!0),__kbImmediateParent:c(q||null,!0,!0),splice:c(function(a,e,
b){var d=new r(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),c=new l("splice",a,d,arguments);if(!0!==m(c)){var f=[],h=w(c.args[2]),k=void 0!==c.args[2]?h?c.args[2].length:1:0,n=0;if(0!==e&&void 0!==this[c.key-1+c.args[1]]){for(var p=0,t=c.args[1];p<t;p++)if(n=c.key+p,d.key=n,d.type="remove",d.value=this[n],c.key=n,c.type="remove",!0!==m(c)&&!0!==v(d)){f.push(this[n-f.length]);for(var q=c.key,u=this.length-1;q<u;q++)this[q]=this[q+1]}else--c.args[1];this.length-=c.args[1];p=0;
for(t=c.args[1];p<t;p++)c.type="postremove",c.key=this.length+p,m(c)}if(0!==k)for(h||(c.args[2]=[c.args[2]]),p=0,t=k;p<t;p++)if(n=c.key+p,d.key=n,d.type="add",d.listener="__kbdatacreatelisteners",d.value=c.args[2][p],c.type="add",c.key=n,!0!==m(c)&&!0!==v(d)){q=this.length;for(u=n;q>u;q--)void 0===this[q]?(Object.defineProperty(this,q,g.call(this,this[q-1],q)),c.key=q,c.type="postadd",m(c)):this[q]=this[q-1];this[n]=c.args[2][p]}c.type="postsplice";m(c)}return f}),push:c(function(a){var e=new r(this,
this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),b=new l("push",this.length,e,arguments);!0!==m(b)&&(e.type="add",e.value=b.args[0],e.key=b.key,b.type="add",!0!==m(b)&&!0!==v(e)&&(Object.defineProperty(this,b.key,g.call(this,b.args[0],b.key)),b.type="postadd",m(b),b.type="postpush",m(b)));return this.length}),pop:c(function(){var a=new r(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbdatadeletelisteners"),e=new l("pop",this.length-1,a,arguments);if(!0!==m(e)){var b=
this[this.length-1];a.type="remove";e.type="remove";if(!0!==m(e)&&!0!==v(a))return--this.length,e.type="postremove",m(e),e.type="postpop",m(e),b}return null}),shift:c(function(){var a=new r(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),e=new l("shift",0,a,arguments);if(!0!==m(e)){var b=this[e.key];a.type="remove";a.key=e.key;e.type="remove";if(!0!==m(e)&&!0!==v(a)){for(var a=e.key,d=this.length-1;a<d;a++)this[a]=this[a+1];--this.length;e.type="postremove";m(e);e.type="postshift";
m(e);return b}}return null}),unshift:c(function(){var a=new r(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),e=new l("unshift",0,a,arguments);if(!0!==m(e)){for(var b=Array.prototype.slice.call(e.args),d=0,c=b.length;d<c;d++)a.key=d,a.type="add",a.value=b[d],e.type="add",e.key=d,!0!==m(e)&&!0!==v(a)||b.splice(d,1);if(0!==b.length){d=this.length-1+b.length;for(c=b.length;-1!==d;d--)d<c?this[d]=b[d]:void 0!==Object.getOwnPropertyDescriptor(this,d).value?(Object.defineProperty(this,
d,g.call(this,this[d-b.length],d)),e.type="postadd",m(e)):this[d]=this[d-b.length];e.type="postunshift";m(e)}}return this.length}),fill:c(function(a,e,b){var d=void 0!==e?Math.max(0,e):0,c=new r(this,d,"fill",a,this[d],arguments,"__kbdatalisteners"),d=new l("fill",d,c,arguments);if(!0!==m(d)){for(c=d.key;c<d.args[2];c++)this[c]=d.args[0];d.type="postfill";m(d)}return this}),reverse:c(function(){var a=new r(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new l("reverse",0,a,arguments);
if(!0!==m(a)){for(var e=this.slice().reverse(),b=0,d=this.length;b<d;b++)this[b]=e[b];a.type="postreverse";m(a)}return this}),sort:c(function(){var a=new r(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new l("sort",0,a,arguments);if(!0!==m(a)){for(var e=this.slice(),e=e.sort.apply(e,arguments),b=0,d=this.length;b<d;b++)this[b]=e[b];a.type="postsort";m(a)}return this}),add:c(function(a,e){var b=new r(this,a,"add",e,void 0,arguments,"__kbdatacreatelisteners"),d=new l("add",a,b,arguments);
void 0===e?this.push(e):!0!==m(d)&&(void 0===this[d.key]?!0!==v(b)&&(Object.defineProperty(this,d.key,g.call(this,d.args[1],d.key)),d.type="postadd",m(d)):console.error("Your attempting to add the index: ",d.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:c(function(a,e){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(e,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),
addPointer:c(function(a,e,b){var d=new r(this,b||e,"add",a[e],void 0,arguments,"__kbdatacreatelisteners"),c=new l("add",b||e,d,arguments);!0!==m(c)&&!0!==v(d)&&(d=Object.getOwnPropertyDescriptor(a,e),Object.defineProperty(this,c.key,k(a,e,d)),c.type="postadd",m(c));return this}),set:c(function(a,c){var b=new r(this,a,"set",c,this[a],arguments,"__kblisteners"),d=new l("set",a,b,arguments);void 0===this[a]?this.add(a,c):!0!==m(d)&&(b.key=d.key,b.value=d.args[1],!0!==v(b)&&(void 0===Object.getOwnPropertyDescriptor(this,
d.key).value?this[d.key]=d.args[1]:Object.defineProperty(this,d.key,g.call(this,d.args[1],d.key)),d.type="postset",m(d)));return this}),remove:c(function(a,c){var b=new r(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new l("remove",a,b,arguments);if(!0!==m(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the index: ",b.key," that does not exist on ",this),this;this.splice(b.key,b.args[1])}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,
function(c,b){if(w(b)||f(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,c,b){if(void 0!==p[a])for(var d=0,f=p[a].length;d<f;d++)p[a][d](a,c,b);if(void 0!==p["*"])for(d=0,f=p["*"].length;d<f;d++)p["*"][d](a,c,b);return this}),subscribe:c(function(a,c){var b=new r(this,a,"subscribe",this[a],void 0,arguments),b=new l("subscribe",a,b,arguments);!0!==m(b)&&(void 0===p[b.key]&&(p[b.key]=[]),p[b.key].push(c));return this}),unsubscribe:c(function(a,c){var b=new r(this,
a,"unsubscribe",this[a],void 0,arguments),b=new l("unsubscribe",a,b,arguments);if(!0!==m(b)&&void 0!==p[b.key]){var d=0,f=p[b.key].length;a:for(;d<f;d++)if(p[b.key][d].toString()===c.toString()){p[b.key].splice(d,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,c){-1!==Object.keys(x).indexOf(a)?x[a].push(c):console.error("There is no action listener by the name: ",
a);return this}),removeActionListener:c(function(a,c){if(-1!==Object.keys(x).indexOf(a))for(var b=0,d=x[a],f=d.length;b!==f;b++){if(d[b].toString()===c.toString()){d.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),stopChange:c(function(){this._stopChange=!0;return this}),_stopChange:c(void 0,!0)});Object.defineProperties(t,{addDataListener:c(h("__kblisteners")),removeDataListener:c(n("__kblisteners")),addDataUpdateListener:c(h("__kbupdatelisteners")),
removeDataUpdateListener:c(n("__kbupdatelisteners")),addDataCreateListener:c(h("__kbdatacreatelisteners")),removeDataCreateListener:c(n("__kbdatacreatelisteners")),addDataRemoveListener:c(h("__kbdatadeletelisteners")),removeDataRemoveListener:c(n("__kbdatadeletelisteners"))});return t}}(),D=function(){return function(y,q,z){function r(a,c,b,d,f,g,h,m){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=c;this.arguments=
g;this.type=b;this.listener=h;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=f;this.stopChange=m}function l(a,c,b,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=c;this.event=b;this.args=d}function h(a,c){var b=t[c];return function(d,c){var e=new r(this,f(b)?d:"",a,f(b)?this[d]:"",f(b)?this[d]:"",arguments),e=new l(a,f(b)?d:
"",e,arguments),g;!0!==m(e)&&(f(b)?(void 0===b[e.key]&&(b[e.key]=[]),g=b[e.key],g.push(e.args[1])):w(b)&&(void 0===b["*"]&&(b["*"]=[]),g=e.args[1]&&"*"===e.args[1]?b["*"]:b,g.push(e.args[0])));return this}}function n(a,c){var b=t[c];return function(d,c){var e=new r(this,d,a,this[d],this[d],arguments),e=new l(a,d,e,arguments),g;if(!0!==m(e))if(f(b)){if(g=b[e.key])for(var h=0,k=g.length;h<k;h++)if(g[h].toString()===e.args[1].toString()){g.splice(h,1);break}}else if(w(b))for(void 0===b["*"]&&(b["*"]=
[]),g=e.args[1]&&"*"===e.args[1]?b["*"]:b,h=0,k=g.length;h<k;h++)if(g[h].toString()===e.args[0].toString()){g.splice(h,1);break}return this}}function f(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function w(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function k(a,c,b){return{get:function(){return a[c]},set:function(b){(this._stopChange?a.stopChange():a)[c]=b;this._stopChange=void 0},enumerable:b.enumerable,configurable:b.configurable}}
function c(a,c,b){return{value:a,writable:!!c,enumerable:!1,configurable:!!b}}function g(a,c){var b=a,d=a;return{get:function(){return b},set:function(a){var f=new r(this,c,"set",a,b,arguments,"__kblisteners",this._stopChange);!0!==v(f)&&(d=b,b=a,f.stopChange||(f.listener="__kbupdatelisteners",f.type="update",v(f)),this._stopChange||this.callSubscribers(c,b,d));this._stopChange=void 0},configurable:!0,enumerable:!0}}var t={},p={},x={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],
unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},m=function(a){for(var c=0,b=x[a.type],d=b.length;c!==d&&(b[c](a),!a._stopPropogration);c++);return a._preventDefault},u=function(a,c){if(!c._stopPropogration&&a)for(var b=0,d=a.length;b!==d&&(a[b](c),!c._stopPropogration);b++);},v=function(a){var c=a.local[a.listener];f(c)?(u(c[a.key],
a),"__kblisteners"===a.listener?(u(c["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",u(a.local[a.listener][a.key],a),u(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(u(c["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",u(a.local[a.listener][a.key],a),u(a.local[a.listener]["*"],a))):w(c)&&(u(c,a),u(c["*"],a));return a._preventDefault};Object.defineProperties(t,{__kbname:c(y||"",!0,!0),__kbref:c(q?q.__kbref||q:t,!0,!0),__kbscopeString:c(z||
"",!0,!0),__kbImmediateParent:c(q||null,!0,!0),add:c(function(a,c){var b=new r(this,a,"add",c,void 0,arguments,"__kbdatacreatelisteners"),d=new l("add",a,b,arguments);!0!==m(d)&&(void 0===this[d.key]?!0!==v(b)&&(Object.defineProperty(this,d.key,g.call(this,d.args[1],d.key)),d.type="postadd",m(d)):console.error("Your attempting to add the property: ",d.key," that already exists on",this,"try using set or direct set instead"));return this}),addPointer:c(function(a,c,b){var d=new r(this,b||c,"add",a[c],
void 0,arguments,"__kbdatacreatelisteners"),f=new l("add",b||c,d,arguments);!0!==m(f)&&!0!==v(d)&&(d=Object.getOwnPropertyDescriptor(a,c),Object.defineProperty(this,f.key,k(a,c,d)),f.type="postadd",m(f));return this}),prototype:c(function(a,e){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(e,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:c(function(a,c){var b=new r(this,a,"set",c,this[a],arguments,"__kblisteners"),
d=new l("set",a,b,arguments);void 0===this[a]?this.add(d.key,d.args[1]):!0!==m(d)&&(b.key=d.key,b.value=d.args[1],!0!==v(b)&&(void 0===Object.getOwnPropertyDescriptor(this,d.key).value?this[d.key]=d.args[1]:Object.defineProperty(this,d.key,g.call(this,d.args[1],d.key)),d.type="postset",m(d)));return this}),remove:c(function(a){var c=new r(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new l("remove",a,c,arguments);if(!0!==m(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",
b.key," that does not exist on ",this),this;!0!==v(c)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type="postremove",m(b))}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,function(c,b){if(w(b)||f(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,c,b){if(void 0!==p[a])for(var d=0,f=p[a].length;d<f;d++)p[a][d](a,c,b);if(void 0!==p["*"])for(d=0,f=p["*"].length;d<f;d++)p["*"][d](a,c,b);return this}),
subscribe:c(function(a,c){var b=new r(this,a,"subscribe",this[a],void 0,arguments),b=new l("subscribe",a,b,arguments);!0!==m(b)&&(void 0===p[b.key]&&(p[b.key]=[]),p[b.key].push(c));return this}),unsubscribe:c(function(a,c){var b=new r(this,a,"unsubscribe",this[a],void 0,arguments),b=new l("unsubscribe",a,b,arguments);if(!0!==m(b)&&void 0!==p[b.key]){var d=0,f=p[b.key].length;a:for(;d<f;d++)if(p[b.key][d].toString()===c.toString()){p[b.key].splice(d,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),
__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,c){-1!==Object.keys(x).indexOf(a)?x[a].push(c):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:c(function(a,c){if(-1!==Object.keys(x).indexOf(a))for(var b=0,d=x[a],f=d.length;b!==f;b++){if(d[b].toString()===c.toString()){d.splice(b,1);break}}else console.error("There is no action listener by the name: ",
a);return this}),onadd:c(function(){},!0),onremove:c(function(){},!0),onset:c(function(){},!0),onupdate:c(function(){},!0),stopChange:c(function(){this._stopChange=!0;return this}),_stopChange:c(void 0,!0)});Object.defineProperties(t,{addDataListener:c(h("addDataListener","__kblisteners")),removeDataListener:c(n("removeDataListener","__kblisteners")),addDataUpdateListener:c(h("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(n("removeDataUpdateListener","__kbupdatelisteners")),
addDataCreateListener:c(h("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:c(n("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:c(h("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:c(n("removeDataRemoveListener","__kbdatadeletelisteners"))});return t}}(),A=function(y){return function(){function q(h,n,f,l){var k=h.tagName.toLowerCase();void 0===n&&(n=[]);void 0===f&&(f={});f.filters||(f.filters={});f.sessionStorage||
(f.sessionStorage=!1);f.localStorage||(f.localStorage=!1);f.store||(f.store=!1);f.multiple||(f.multiple=!1);void 0===l&&(l={});var c=[];void 0!==h.kb_maps&&(c=h.kb_maps.map(function(c){return c.prop}));for(var g=0,t=h.attributes.length;g<t;g++){var p=h.attributes[g].name,r=c.indexOf(p);l[p]=-1!==r?h.kb_mapper.kb_viewmodel.getScope(Object.keys(h.kb_maps[r].binds)[0].key):h.getAttribute(p)}return q.createViewModel(k,n,f,l)}var z=y("Model"),r={},l="id filters class sessionStorage localStorage store component".split(" ");
q.ignore=function(h){-1===l.indexOf(h)&&l.push(h);return this};q.unignore=function(h){-1!==l.indexOf(h)&&l.splice(l.indexOf(h),1);return this};q.createViewModel=function(h,n,f,l){if(q.isRegistered(h)){var k=y(h),c=r[h];k.__proto__=void 0!==c.prototype?c.prototype:c.__proto__;if(f){var g=0;f=Object.keys(f);for(var t=f.length;g<t;g++)k.isObservable(l,f[g])?k.addPointer(l,f[g]):k.add(f[g],l[f[g]])}if("function"===typeof c)for(c.apply(k,n),g=0,f=Object.keys(k),t=f.length;g<t;g++)k.isObservable(k,f[g])||
k.set(f[g],k[f[g]]);else for(g=0,f=Object.keys(c),t=f.length;g<t;g++)k.isObservable(c,f[g])?(k[f[g]]&&k.remove(f[g]),k.addPointer(c,f[g])):k.set(f[g],c[f[g]]);if(l)for(g=0,f=Object.keys(l),t=f.length;g<t;g++)k.isObservable(l,f[g])?(n=function(c){l[c.type]&&l[c.type].call(l,c.args)},void 0!==k[f[g]]&&k.remove(f[g]),k.addPointer(l,f[g]),k.addActionListener("addDataListener",n).addActionListener("addDataUpdateListener",n).addActionListener("addDataCreateListener",n).addActionListener("addDataRemoveListener",
n).addActionListener("removeDataListener",n).addActionListener("removeDataUpdateListener",n).addActionListener("removeDataCreateListener",n).addActionListener("removeDataRemoveListener",n)):k.set(f[g],l[f[g]]);if(k.sessionStorage){if(n=sessionStorage.getItem(k.id||h))for(n=JSON.parse(n),g=0,f=Object.keys(n),t=f.length;g<t;g++)k.set(f[g],n[f[g]]);else sessionStorage.setItem(k.id||h,k.stringify());k.addChildDataUpdateListener("*",function(){sessionStorage.setItem(k.id||h,k.stringify())})}if(k.localStorage){if(n=
localStorage.getItem(k.id||h))for(n=JSON.parse(n),g=0,f=Object.keys(n),t=f.length;g<t;g++)k.set(f[g],n[f[g]]);else localStorage.setItem(k.id||h,k.stringify());k.addChildDataUpdateListener("*",function(){localStorage.setItem(k.id||h,k.stringify())})}k.store&&z.set(k.id||h,k);return k}console.error("There is no viewmodel by the name %o",h);return null};q.isRegistered=function(h){return void 0!==r[h]};q.register=function(h,l){r[h]=l;return this};q.model=function(h){return h?z[h]:z};return q}}(function(y,
q){return function(z,r){function l(b){return"[object Array]"===Object.prototype.toString.call(b)}function h(b){return"[object Object]"===Object.prototype.toString.call(b)}function n(b,a){return a?b[a]?void 0===Object.getOwnPropertyDescriptor(b,a).value:!1:void 0!==b.__kbname}function f(b){return b.split(".").filter(function(b){return 0!==b.length})}function w(b,a){function c(b){a.splice(0,1);return 0===a.length?b:b[a[0]]?c(b[a[0]]):b}return(a=f(a))&&1!==a.length?c(b[a[0]]):a&&a.length?b[a[0]]:b}function k(b,
a,c){function e(b){a.splice(0,1);1===a.length?b[a[0]]=c:e(b[a[0]])}(a=f(a))&&1!==a.length?e(b[a[0]]):a&&a.length&&(b[a[0]]=c);return this}function c(b){var a=b.key.split(".");if(1===a.length&&"*"!==b.key)return!1;"*"!==b.key?(b.preventDefault(),w(b.event.local,a.slice(0,a.length-1).join("."))[b.type](a[a.length-1],b.args[1])):(b.preventDefault(),-1!==b.type.toLowerCase().indexOf("update")?b.event.local.addChildDataUpdateListener("*",b.args[1]):b.event.local.addChildDataListener("*",b.args[1]))}function g(b){var a=
b.key.split(".");if(1===a.length&&"*"!==b.key)return!1;if("*"!==b.key)b.preventDefault(),w(b.event.local,a.slice(0,a.length-1).join("."))[b.type](a[a.length-1],b.args[1]);else for(var a=Object.keys(b.event.local).filter(function(a){return h(b.event.local[a])||l(b.event.local[a])}),c=0,e=a.length;c<e;c++)b.event.local[a[c]].subscribe(b.key,b.args[1])}function t(b){void 0===b.parseData&&b.prototype("parseData",a);void 0===b.isArray&&b.prototype("isArray",l);void 0===b.isObject&&b.prototype("isObject",
h);void 0===b.isObservable&&b.prototype("isObservable",n);void 0===b.updateName&&b.prototype("updateName",m);void 0===b.getScopeByScopeString&&b.prototype("getScopeByScopeString",w);void 0===b.setScopeByScopeString&&b.prototype("setScopeByScopeString",k);void 0===b.addChildDataListener&&b.prototype("addChildDataListener",p("__kbparentlisteners"));void 0===b.removeChildDataListener&&b.prototype("removeChildDataListener",x("__kbparentlisteners"));void 0===b.addChildDataUpdateListener&&b.prototype("addChildDataUpdateListener",
p("__kbparentupdatelisteners"));void 0===b.removeChildDataUpdateListener&&b.prototype("removeChildDataUpdateListener",x("__kbparentupdatelisteners"));return b.addActionListener("add",u).addActionListener("set",v).addActionListener("subscribe",g).addActionListener("unsubscribe",g).addActionListener("addDataListener",c).addActionListener("addDataUpdateListener",c).addActionListener("addDataCreateListener",c).addActionListener("addDataRemoveListener",c).addActionListener("removeDataListener",c).addActionListener("removeDataUpdateListener",
c).addActionListener("removeDataCreateListener",c).addActionListener("removeDataRemoveListener",c)}function p(b){return function(a,c){function e(a,c,d){var f=Object.keys(a).filter(function(b){return h(a[b])||l(a[b])});void 0===a[b][c]&&(a[b][c]=[]);a[b][c].push(d);for(var g=0,k=f.length;g<k;g++)e(a[f[g]],c,d)}e(this,a,c);return this}}function x(b){return function(a,c){function e(a,c,d){var f=Object.keys(a).filter(function(b){return h(a[b])||l(a[b])}),g=0,k=a[b][c].length;a:for(;g<k;g++)if(a[b][c][g].toString()===
d.toString()){a[b][c].splice(g,1);break a}g=0;for(k=f.length;g<k;g++)e(a[f[g]],c,d)}e(this,a,c);return this}}function m(a){"string"===typeof a&&(e.name=a);return this}function u(a){if((h(a.event.value)||l(a.event.value))&&!n(a.event.value)){a.preventDefault();var c=a.event.local,e=c.__kbscopeString+(0!==c.__kbscopeString.length?".":"")+a.key,e=(h(a.event.value)?q:y)(c.__kbname,c,e);t(e).parseData(a.event.value);c.add(a.key,e)}}function v(a){if((h(a.event.value)||l(a.event.value))&&!n(a.event.value)){a.preventDefault();
var c=a.event.local,e=c.__kbscopeString+(0!==c.__kbscopeString.length?".":"")+a.key,e=(h(a.event.value)?q:y)(c.__kbname,c,e);t(e).parseData(a.event.value);c.set(a.key,e)}}function a(a){for(var c=0,e=Object.keys(a),f=e.length;c<f;c++)this.set(e[c],a[e[c]]);return this}var e={name:z};_data=("string"===typeof r&&"array"===r.toLowercase()?y:q)(e.name,void 0,"").addPointer(e,"name","__kbname");t(_data);return _data}}(C,D));window.define&&window.require?define([],function(){return A}):window.module&&(module.exports=
A);return A}();
