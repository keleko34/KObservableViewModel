var KObservableViewmodel=function(){var D=function(){return function(A,u,B){function q(a,e,b,c,d,h,v,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=e;this.arguments=h;this.type=b;this.listener=v;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=c;this.oldValue=d;this.stopChange=f}function l(a,e,b,c){this.stopPropogation=function(){this._stopPropogration=
!0};this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=e;this.event=b;this.args=c}function k(a,e){var b=r[e];return function(c,d){var h=new q(this,f(b)?c:"",a,f(b)?this[c]:"",f(b)?this[c]:"",arguments,e),h=new l(a,f(b)?c:"",h,arguments),v;!0!==n(h)&&(f(b)?(void 0===b[h.key]&&(b[h.key]=[]),v=b[h.key],v.push(h.args[1])):t(b)&&(void 0===b["*"]&&(b["*"]=[]),v=h.args[1]&&"*"===h.args[1]?b["*"]:b,v.push(h.args[0])));return this}}function w(a,e){var b=r[e];return function(c,d){var h=
new q(this,c,a,this[c],this[c],arguments,e),h=new l(a,c,h,arguments),v;if(!0!==n(h))if(f(b)){if(v=b[h.key])for(var g=0,k=v.length;g<k;g++)if(v[g].toString()===h.args[1].toString()){v.splice(g,1);break}}else if(t(b))for(void 0===b["*"]&&(b["*"]=[]),v=h.args[1]&&"*"===h.args[1]?b["*"]:b,g=0,k=v.length;g<k;g++)if(v[g].toString()===h.args[0].toString()){v.splice(g,1);break}return this}}function f(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function t(a){return"object"===
typeof a&&!!a&&a.constructor.toString()===Array.toString()}function m(a,e,b){return{get:function(){return a[e]},set:function(b){(this._stopChange?a.stopChange():a)[e]=b;this._stopChange=void 0},enumerable:b.enumerable,configurable:b.configurable}}function d(a,e,b){return{value:a,writable:!!e,enumerable:!1,configurable:!!b}}function g(a,e){var b=a,c=a;return{get:function(){return b},set:function(a){var h=new q(this,e,"set",a,b,arguments,"__kblisteners",this._stopChange);!0!==y(h)&&(c=b,b=a,h.stopChange||
(h.listener="__kbupdatelisteners",h.type="update",y(h)),this._stopChange||this.callSubscribers(e,b,c));this._stopChange=void 0},configurable:!0,enumerable:!0}}var r=[],p={},z={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],
removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},n=function(a){for(var e=0,b=z[a.type],c=b.length;e!==c&&(b[e](a),!a._stopPropogration);e++);return a._preventDefault},x=function(a,e){if(!e._stopPropogration&&a)for(var b=0,c=a.length;b!==c&&(a[b](e),!e._stopPropogration);b++);},y=function(a){var e=a.local[a.listener];f(e)?(x(e[a.key],a),"__kblisteners"===a.listener?(x(e["*"],a),a.fromListener="__kblisteners",a.listener=
"__kbparentlisteners",x(a.local[a.listener][a.key],a),x(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(x(e["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",x(a.local[a.listener][a.key],a),x(a.local[a.listener]["*"],a))):t(e)&&(x(e,a),x(e["*"],a));return a._preventDefault};Object.defineProperties(r,{__kbname:d(A||"",!0,!0),__kbref:d(u?u.__kbref||u:r,!0,!0),__kbscopeString:d(B||"",!0,!0),__kbImmediateParent:d(u||null,!0,!0),splice:d(function(a,e,
b){var c=new q(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),d=new l("splice",a,c,arguments);if(!0!==n(d)){var h=[],v=Array.prototype.slice.call(arguments),f=v.length-2,k=0;v.splice(0,2);if(0!==e&&void 0!==this[d.key-1+d.args[1]])for(var m=0,w=d.args[1];m<w;m++)if(k=d.key,c.key=k,c.type="remove",c.value=this[k],d.type="remove",!0!==n(d)&&!0!==y(c)){h.push(this[k]);for(var p=d.key,r=this.length-1;p<r;p++)this[p]=this[p+1];--this.length;d.type="postremove";n(d)}else--d.args[1];
if(0!==f)for(m=0,w=f;m<w;m++)if(k=d.key+Math.min(1,m),c.key=k,c.type="add",c.listener="__kbdatacreatelisteners",c.value=v[m],d.type="add",d.key=k,!0!==n(d)&&!0!==y(c)){p=this.length;for(r=k;p>r;p--)void 0===this[p]?(Object.defineProperty(this,p,g.call(this,this[p-1],p)),d.key=p,d.type="postadd",n(d)):this[p]=this[p-1];this[k]=v[m]}d.type="postsplice";n(d)}return h}),push:d(function(a){var e=new q(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),b=new l("push",this.length,e,arguments);
!0!==n(b)&&(e.type="add",e.value=b.args[0],e.key=b.key,b.type="add",!0!==n(b)&&!0!==y(e)&&(Object.defineProperty(this,b.key,g.call(this,b.args[0],b.key)),b.type="postadd",n(b),b.type="postpush",n(b)));return this.length}),pop:d(function(){var a=new q(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbdatadeletelisteners"),e=new l("pop",this.length-1,a,arguments);if(!0!==n(e)){var b=this[this.length-1];a.type="remove";e.type="remove";if(!0!==n(e)&&!0!==y(a))return--this.length,e.type=
"postremove",n(e),e.type="postpop",n(e),b}return null}),shift:d(function(){var a=new q(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),e=new l("shift",0,a,arguments);if(!0!==n(e)){var b=this[e.key];a.type="remove";a.key=e.key;e.type="remove";if(!0!==n(e)&&!0!==y(a)){for(var a=e.key,c=this.length-1;a<c;a++)this[a]=this[a+1];--this.length;e.type="postremove";n(e);e.type="postshift";n(e);return b}}return null}),unshift:d(function(){var a=new q(this,0,"unshift",this[0],void 0,arguments,
"__kbdatacreatelisteners"),e=new l("unshift",0,a,arguments);if(!0!==n(e)){for(var b=Array.prototype.slice.call(e.args),c=0,d=b.length;c<d;c++)a.key=c,a.type="add",a.value=b[c],e.type="add",e.key=c,!0!==n(e)&&!0!==y(a)||b.splice(c,1);if(0!==b.length){c=this.length-1+b.length;for(d=b.length;-1!==c;c--)c<d?this[c]=b[c]:void 0!==Object.getOwnPropertyDescriptor(this,c).value?(Object.defineProperty(this,c,g.call(this,this[c-b.length],c)),e.type="postadd",n(e)):this[c]=this[c-b.length];e.type="postunshift";
n(e)}}return this.length}),fill:d(function(a,e,b){var c=void 0!==e?Math.max(0,e):0,d=new q(this,c,"fill",a,this[c],arguments,"__kbdatalisteners"),c=new l("fill",c,d,arguments);if(!0!==n(c)){for(d=c.key;d<c.args[2];d++)this[d]=c.args[0];c.type="postfill";n(c)}return this}),reverse:d(function(){var a=new q(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new l("reverse",0,a,arguments);if(!0!==n(a)){for(var e=this.slice().reverse(),b=0,c=this.length;b<c;b++)this[b]=e[b];a.type="postreverse";
n(a)}return this}),sort:d(function(){var a=new q(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new l("sort",0,a,arguments);if(!0!==n(a)){for(var e=this.slice(),e=e.sort.apply(e,arguments),b=0,c=this.length;b<c;b++)this[b]=e[b];a.type="postsort";n(a)}return this}),add:d(function(a,e){var b=new q(this,a,"add",e,void 0,arguments,"__kbdatacreatelisteners"),c=new l("add",a,b,arguments);void 0===e?this.push(a):!0!==n(c)&&(void 0===this[c.key]?!0!==y(b)&&(Object.defineProperty(this,c.key,
g.call(this,c.args[1],c.key)),c.type="postadd",n(c)):console.error("Your attempting to add the index: ",c.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:d(function(a,e){void 0===this[a]?Object.defineProperty(this.__proto__,a,d(e,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:d(function(a,e,b){var c=new q(this,b||e,"add",a[e],void 0,arguments,"__kbdatacreatelisteners"),
d=new l("add",b||e,c,arguments);!0!==n(d)&&!0!==y(c)&&(c=Object.getOwnPropertyDescriptor(a,e),Object.defineProperty(this,d.key,m(a,e,c)),d.type="postadd",n(d));return this}),set:d(function(a,e){var b=new q(this,a,"set",e,this[a],arguments,"__kblisteners"),c=new l("set",a,b,arguments);void 0===this[a]?this.add(a,e):!0!==n(c)&&(b.key=c.key,b.value=c.args[1],!0!==y(b)&&(void 0===Object.getOwnPropertyDescriptor(this,c.key).value?this[c.key]=c.args[1]:Object.defineProperty(this,c.key,g.call(this,c.args[1],
c.key)),c.type="postset",n(c)));return this}),remove:d(function(a,e){var b=new q(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new l("remove",a,b,arguments);if(!0!==n(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the index: ",b.key," that does not exist on ",this),this;this.splice(b.key,b.args[1])}return this}),stringify:d(function(){var a=[];return JSON.stringify(this,function(e,b){if(t(b)||f(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),
callSubscribers:d(function(a,e,b){if(void 0!==p[a])for(var c=0,d=p[a].length;c<d;c++)p[a][c](a,e,b);if(void 0!==p["*"])for(c=0,d=p["*"].length;c<d;c++)p["*"][c](a,e,b);return this}),subscribe:d(function(a,e){var b=new q(this,a,"subscribe",this[a],void 0,arguments,"__kbsubscribers"),b=new l("subscribe",a,b,arguments);!0!==n(b)&&(void 0===p[b.key]&&(p[b.key]=[]),p[b.key].push(e));return this}),unsubscribe:d(function(a,e){var b=new q(this,a,"unsubscribe",this[a],void 0,arguments,"__kbsubscribers"),b=
new l("unsubscribe",a,b,arguments);if(!0!==n(b)&&void 0!==p[b.key]){var c=0,d=p[b.key].length;a:for(;c<d;c++)if(p[b.key][c].toString()===e.toString()){p[b.key].splice(c,1);break a}}return this}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),__kbparentupdatelisteners:d({}),__kbdatacreatelisteners:d([]),__kbdatadeletelisteners:d([]),addActionListener:d(function(a,e){-1!==Object.keys(z).indexOf(a)?z[a].push(e):console.error("There is no action listener by the name: ",a);return this}),
removeActionListener:d(function(a,e){if(-1!==Object.keys(z).indexOf(a))for(var b=0,c=z[a],d=c.length;b!==d;b++){if(c[b].toString()===e.toString()){c.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),stopChange:d(function(){this._stopChange=!0;return this}),_stopChange:d(void 0,!0)});Object.defineProperties(r,{addDataListener:d(k("addDataListener","__kblisteners")),removeDataListener:d(w("removeDataListener","__kblisteners")),addDataUpdateListener:d(k("addDataUpdateListener",
"__kbupdatelisteners")),removeDataUpdateListener:d(w("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:d(k("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:d(w("addDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:d(k("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:d(w("removeDataRemoveListener","__kbdatadeletelisteners"))});return r}}(),E=function(){return function(A,u,B){function q(a,e,b,c,d,h,v,
f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=e;this.arguments=h;this.type=b;this.listener=v;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=c;this.oldValue=d;this.stopChange=f}function l(a,e,b,c){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=e;this.event=
b;this.args=c}function k(a,e){var b=r[e];return function(c,e){var h=new q(this,f(b)?c:"",a,f(b)?this[c]:"",f(b)?this[c]:"",arguments),h=new l(a,f(b)?c:"",h,arguments),d;!0!==n(h)&&(f(b)?(void 0===b[h.key]&&(b[h.key]=[]),d=b[h.key],d.push(h.args[1])):t(b)&&(void 0===b["*"]&&(b["*"]=[]),d=h.args[1]&&"*"===h.args[1]?b["*"]:b,d.push(h.args[0])));return this}}function w(a,e){var b=r[e];return function(c,e){var h=new q(this,c,a,this[c],this[c],arguments),h=new l(a,c,h,arguments),d;if(!0!==n(h))if(f(b)){if(d=
b[h.key])for(var g=0,k=d.length;g<k;g++)if(d[g].toString()===h.args[1].toString()){d.splice(g,1);break}}else if(t(b))for(void 0===b["*"]&&(b["*"]=[]),d=h.args[1]&&"*"===h.args[1]?b["*"]:b,g=0,k=d.length;g<k;g++)if(d[g].toString()===h.args[0].toString()){d.splice(g,1);break}return this}}function f(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function t(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function m(a,e,b){return{get:function(){return a[e]},
set:function(b){(this._stopChange?a.stopChange():a)[e]=b;this._stopChange=void 0},enumerable:b.enumerable,configurable:b.configurable}}function d(a,e,b){return{value:a,writable:!!e,enumerable:!1,configurable:!!b}}function g(a,e){var b=a,c=a;return{get:function(){return b},set:function(a){var h=new q(this,e,"set",a,b,arguments,"__kblisteners",this._stopChange);!0!==y(h)&&(c=b,b=a,h.stopChange||(h.listener="__kbupdatelisteners",h.type="update",y(h)),this._stopChange||this.callSubscribers(e,b,c));this._stopChange=
void 0},configurable:!0,enumerable:!0}}var r={},p={},z={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},n=function(a){for(var e=0,b=z[a.type],c=b.length;e!==c&&(b[e](a),!a._stopPropogration);e++);return a._preventDefault},x=function(a,e){if(!e._stopPropogration&&
a)for(var b=0,c=a.length;b!==c&&(a[b](e),!e._stopPropogration);b++);},y=function(a){var e=a.local[a.listener];f(e)?(x(e[a.key],a),"__kblisteners"===a.listener?(x(e["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",x(a.local[a.listener][a.key],a),x(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(x(e["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",x(a.local[a.listener][a.key],a),x(a.local[a.listener]["*"],a))):t(e)&&(x(e,a),
x(e["*"],a));return a._preventDefault};Object.defineProperties(r,{__kbname:d(A||"",!0,!0),__kbref:d(u?u.__kbref||u:r,!0,!0),__kbscopeString:d(B||"",!0,!0),__kbImmediateParent:d(u||null,!0,!0),add:d(function(a,e){var b=new q(this,a,"add",e,void 0,arguments,"__kbdatacreatelisteners"),c=new l("add",a,b,arguments);!0!==n(c)&&(void 0===this[c.key]?!0!==y(b)&&(Object.defineProperty(this,c.key,g.call(this,c.args[1],c.key)),c.type="postadd",n(c)):console.error("Your attempting to add the property: ",c.key,
" that already exists on",this,"try using set or direct set instead"));return this}),addPointer:d(function(a,e,b){var c=new q(this,b||e,"add",a[e],void 0,arguments,"__kbdatacreatelisteners"),d=new l("add",b||e,c,arguments);!0!==n(d)&&!0!==y(c)&&(c=Object.getOwnPropertyDescriptor(a,e),Object.defineProperty(this,d.key,m(a,e,c)),d.type="postadd",n(d));return this}),prototype:d(function(a,e){void 0===this[a]?Object.defineProperty(this.__proto__,a,d(e,!0,!0)):console.error("Your attempting to add the your method with the prop: ",
a," that already exists");return this}),set:d(function(a,e){var b=new q(this,a,"set",e,this[a],arguments,"__kblisteners"),c=new l("set",a,b,arguments);void 0===this[a]?this.add(c.key,c.args[1]):!0!==n(c)&&(b.key=c.key,b.value=c.args[1],!0!==y(b)&&(void 0===Object.getOwnPropertyDescriptor(this,c.key).value?this[c.key]=c.args[1]:Object.defineProperty(this,c.key,g.call(this,c.args[1],c.key)),c.type="postset",n(c)));return this}),remove:d(function(a){var e=new q(this,a,"remove",this[a],this[a],arguments,
"__kbdatadeletelisteners"),b=new l("remove",a,e,arguments);if(!0!==n(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",b.key," that does not exist on ",this),this;!0!==y(e)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type="postremove",n(b))}return this}),stringify:d(function(){var a=[];return JSON.stringify(this,function(e,b){if(t(b)||f(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:d(function(a,
e,b){if(void 0!==p[a])for(var c=0,d=p[a].length;c<d;c++)p[a][c](a,e,b);if(void 0!==p["*"])for(c=0,d=p["*"].length;c<d;c++)p["*"][c](a,e,b);return this}),subscribe:d(function(a,e){var b=new q(this,a,"subscribe",this[a],void 0,arguments),b=new l("subscribe",a,b,arguments);!0!==n(b)&&(void 0===p[b.key]&&(p[b.key]=[]),p[b.key].push(e));return this}),unsubscribe:d(function(a,e){var b=new q(this,a,"unsubscribe",this[a],void 0,arguments),b=new l("unsubscribe",a,b,arguments);if(!0!==n(b)&&void 0!==p[b.key]){var c=
0,d=p[b.key].length;a:for(;c<d;c++)if(p[b.key][c].toString()===e.toString()){p[b.key].splice(c,1);break a}}return this}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),__kbparentupdatelisteners:d({}),__kbdatacreatelisteners:d([]),__kbdatadeletelisteners:d([]),addActionListener:d(function(a,e){-1!==Object.keys(z).indexOf(a)?z[a].push(e):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:d(function(a,e){if(-1!==Object.keys(z).indexOf(a))for(var b=
0,c=z[a],d=c.length;b!==d;b++){if(c[b].toString()===e.toString()){c.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:d(function(){},!0),onremove:d(function(){},!0),onset:d(function(){},!0),onupdate:d(function(){},!0),stopChange:d(function(){this._stopChange=!0;return this}),_stopChange:d(void 0,!0)});Object.defineProperties(r,{addDataListener:d(k("addDataListener","__kblisteners")),removeDataListener:d(w("removeDataListener","__kblisteners")),
addDataUpdateListener:d(k("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:d(w("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:d(k("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:d(w("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:d(k("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:d(w("removeDataRemoveListener","__kbdatadeletelisteners"))});return r}}(),C=function(A){return function(){function u(k,
w,f,l){var m=k.tagName.toLowerCase();void 0===w&&(w=[]);void 0===f&&(f={});f.filters||(f.filters={});f.sessionStorage||(f.sessionStorage=!1);f.localStorage||(f.localStorage=!1);f.store||(f.store=!1);f.multiple||(f.multiple=!1);void 0===l&&(l={});var d=[];void 0!==k.kb_maps&&(d=k.kb_maps.map(function(d){return d.prop}));for(var g=0,q=k.attributes.length;g<q;g++){var p=k.attributes[g].name,z=d.indexOf(p);l[p]=-1!==z?k.kb_mapper.kb_viewmodel.getScope(Object.keys(k.kb_maps[z].binds)[0].key):k.getAttribute(p)}return u.createViewModel(m,
w,f,l)}var B=A("Model"),q={},l="id filters class sessionStorage localStorage store component".split(" ");u.ignore=function(k){-1===l.indexOf(k)&&l.push(k);return this};u.unignore=function(k){-1!==l.indexOf(k)&&l.splice(l.indexOf(k),1);return this};u.createViewModel=function(k,l,f,t){if(u.isRegistered(k)){var m=A(k),d=q[k];m.__proto__=void 0!==d.prototype?d.prototype:d.__proto__;if(f){var g=0;f=Object.keys(f);for(var r=f.length;g<r;g++)m.isObservable(t,f[g])?m.addPointer(t,f[g]):m.add(f[g],t[f[g]])}if("function"===
typeof d)for(d.apply(m,l),g=0,f=Object.keys(m),r=f.length;g<r;g++)m.isObservable(m,f[g])||m.set(f[g],m[f[g]]);else for(g=0,f=Object.keys(d),r=f.length;g<r;g++)m.isObservable(d,f[g])?(m[f[g]]&&m.remove(f[g]),m.addPointer(d,f[g])):m.set(f[g],d[f[g]]);if(t)for(g=0,f=Object.keys(t),r=f.length;g<r;g++)m.isObservable(t,f[g])?(l=function(d){t[d.type]&&t[d.type].apply(t,d.args)},void 0!==m[f[g]]&&m.remove(f[g]),m.addPointer(t,f[g]),m.addActionListener("addDataListener",l).addActionListener("addDataUpdateListener",
l).addActionListener("addDataCreateListener",l).addActionListener("addDataRemoveListener",l).addActionListener("removeDataListener",l).addActionListener("removeDataUpdateListener",l).addActionListener("removeDataCreateListener",l).addActionListener("removeDataRemoveListener",l)):m.set(f[g],t[f[g]]);if(m.sessionStorage){if(l=sessionStorage.getItem(m.id||k))for(l=JSON.parse(l),g=0,f=Object.keys(l),r=f.length;g<r;g++)m.set(f[g],l[f[g]]);else sessionStorage.setItem(m.id||k,m.stringify());m.addChildDataUpdateListener("*",
function(){sessionStorage.setItem(m.id||k,m.stringify())})}if(m.localStorage){if(l=localStorage.getItem(m.id||k))for(l=JSON.parse(l),g=0,f=Object.keys(l),r=f.length;g<r;g++)m.set(f[g],l[f[g]]);else localStorage.setItem(m.id||k,m.stringify());m.addChildDataUpdateListener("*",function(){localStorage.setItem(m.id||k,m.stringify())})}m.store&&B.set(m.id||k,m);return m}console.error("There is no viewmodel by the name %o",k);return null};u.isRegistered=function(k){return void 0!==q[k]};u.register=function(k,
l){q[k]=l;return this};u.model=function(k){return k?B[k]:B};return u}}(function(A,u){return function(B,q){function l(a){return"[object Array]"===Object.prototype.toString.call(a)}function k(a){return"[object Object]"===Object.prototype.toString.call(a)}function w(a,b){return b?a[b]?void 0===Object.getOwnPropertyDescriptor(a,b).value:!1:void 0!==a.__kbname}function f(a,b,c,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.type=
a;this.key=b;this.event=c;this.args=d}function t(a){return a.split(".").filter(function(a){return 0!==a.length})}function m(a,b){function c(a){b.splice(0,1);return 0===b.length?a:a[b[0]]?c(a[b[0]]):a}return(b=t(b))&&1!==b.length?c(a[b[0]]):b&&b.length?a[b[0]]:a}function d(a,b,c){function d(a){b.splice(0,1);1===b.length?a[b[0]]=c:d(a[b[0]])}(b=t(b))&&1!==b.length?d(a[b[0]]):b&&b.length&&(a[b[0]]=c);return this}function g(a){var b=a.key.split(".");if(1===b.length&&"*"!==a.key)return!1;"*"!==a.key?(a.preventDefault(),
m(a.event.local,b.slice(0,b.length-1).join("."))[a.type](b[b.length-1],a.args[1])):(a.preventDefault(),-1!==a.type.toLowerCase().indexOf("update")?a.event.local.addChildDataUpdateListener("*",a.args[1]):a.event.local.addChildDataListener("*",a.args[1]))}function r(a){var b=a.key.split(".");if(1===b.length&&"*"!==a.key)return!1;if("*"!==a.key)a.preventDefault(),m(a.event.local,b.slice(0,b.length-1).join("."))[a.type](b[b.length-1],a.args[1]);else for(var b=Object.keys(a.event.local).filter(function(b){return k(a.event.local[b])||
l(a.event.local[b])}),c=0,d=b.length;c<d;c++)a.event.local[b[c]].subscribe(a.key,a.args[1])}function p(h){void 0===h.parseData&&h.prototype("parseData",c);void 0===h.isArray&&h.prototype("isArray",l);void 0===h.isObject&&h.prototype("isObject",k);void 0===h.isObservable&&h.prototype("isObservable",w);void 0===h.updateName&&h.prototype("updateName",x);void 0===h.getScopeByScopeString&&h.prototype("getScopeByScopeString",m);void 0===h.setScopeByScopeString&&h.prototype("setScopeByScopeString",d);void 0===
h.addChildDataListener&&h.prototype("addChildDataListener",z("__kbparentlisteners"));void 0===h.removeChildDataListener&&h.prototype("removeChildDataListener",n("__kbparentlisteners"));void 0===h.addChildDataUpdateListener&&h.prototype("addChildDataUpdateListener",z("__kbparentupdatelisteners"));void 0===h.removeChildDataUpdateListener&&h.prototype("removeChildDataUpdateListener",n("__kbparentupdatelisteners"));void 0===h.setUnobservable&&h.prototype("setUnobservable",y);void 0===h.addUnobservable&&
h.prototype("addUnobservable",a);return h.addActionListener("add",e).addActionListener("set",b).addActionListener("subscribe",r).addActionListener("unsubscribe",r).addActionListener("addDataListener",g).addActionListener("addDataUpdateListener",g).addActionListener("addDataCreateListener",g).addActionListener("addDataRemoveListener",g).addActionListener("removeDataListener",g).addActionListener("removeDataUpdateListener",g).addActionListener("removeDataCreateListener",g).addActionListener("removeDataRemoveListener",
g).addDataUpdateListener("*",function(a){this._stopChange?this._stopChange=!1:b(new f("set",a.key,a,[a.value]))})}function z(a){return function(b,c){function d(b,c,e){var g=Object.keys(b).filter(function(a){return k(b[a])||l(b[a])});void 0===b[a][c]&&(b[a][c]=[]);b[a][c].push(e);for(var f=0,m=g.length;f<m;f++)d(b[g[f]],c,e)}d(this,b,c);return this}}function n(a){return function(b,c){function d(b,c,e){var g=Object.keys(b).filter(function(a){return k(b[a])||l(b[a])}),f=0,m=b[a][c].length;a:for(;f<m;f++)if(b[a][c][f].toString()===
e.toString()){b[a][c].splice(f,1);break a}f=0;for(m=g.length;f<m;f++)d(b[g[f]],c,e)}d(this,b,c);return this}}function x(a){"string"===typeof a&&(C.name=a);return this}function y(a,b){this.stopChange()[a]=b;return this}function a(a,b){void 0===this[a]?this[a]=b:console.error("")}function e(a){if((k(a.event.value)||l(a.event.value))&&!w(a.event.value)){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+a.key,c=(k(a.event.value)?u:A)(b.__kbname,b,c);p(c).parseData(a.event.value);
void 0===b[a.key]?b.add(a.key,c):l(b)?b.splice(a.key,0,c):k(b)&&b.set(a.key,c)}}function b(a){if((k(a.event.value)||l(a.event.value))&&!w(a.event.value)){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+a.key,c=(k(a.event.value)?u:A)(b.__kbname,b,c);p(c).parseData(a.event.value);b.set(a.key,c)}}function c(a){for(var b=0,c=Object.keys(a),d=c.length;b<d;b++)this.set(c[b],a[c[b]]);return this}var C={name:B};_data=("string"===typeof q&&"array"===q.toLowercase()?
A:u)(C.name,void 0,"").addPointer(C,"name","__kbname");p(_data);return _data}}(D,E));window.define&&window.require?define([],function(){return C}):window.module&&(module.exports=C);return C}();
